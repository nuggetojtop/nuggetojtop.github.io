<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Nugget OJ - 编程在线评测平台 </title>
    <link rel="stylesheet" href="/ojtest/css/common.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="/ojtest/index.html" class="logo">Nugget OJ</a>
            <div class="nav">
                <!-- 由 common.js 动态渲染 -->
            </div>
            <div class="admin-nav">
                <!-- 管理员入口，由 common.js 动态渲染 -->
            </div>
        </div>
    </header>

    <div class="container">
        <div class="card" style="margin-top: 50px; text-align: center;">
            <h1>欢迎使用 Nugget OJ 在线评测平台</h1>
            <p style="font-size: 18px; margin: 20px 0; color: #666;">
                在这里，你可以刷题、提交代码、查看判题结果，提升编程能力！
            </p>
            <div style="display: flex; gap: 20px; justify-content: center; margin-top: 30px;">
                <a href="/ojtest/problem/index.html" class="btn btn-success">开始刷题</a>
                <a href="/ojtest/register.html" class="btn">立即注册</a>
            </div>
        </div>

        <div style="margin-top: 50px;">
            <h2>平台公告</h2>
            <div class="card">
                <p>1. 本平台基于洛谷 API 提供判题服务，需确保代码符合洛谷题目要求。</p>
                <p>2. 管理员可创建/编辑/删除题目，普通用户可刷题和查看提交记录。</p>
                <p>3. 如有问题，请联系管理员（admin）。</p>
            </div>

            <h2 style="margin-top: 30px;">最新题目</h2>
            <div class="card" id="latest-problems">
                <!-- 由 JS 动态渲染最新题目 -->
            </div>
        </div>
    </div>

    <script src="/ojtest/js/common.js"></script>
    <script>
        // 渲染最新题目（最多显示5题）
        function renderLatestProblems() {
            const problems = ProblemUtil.getAllProblems();
            const latestProblems = problems.slice(-5).reverse(); // 取最新5题
            const container = document.getElementById('latest-problems');

            if (latestProblems.length === 0) {
                container.innerHTML = '<p>暂无题目，管理员可创建题目</p>';
                return;
            }

            let html = '<table><thead><tr><th>题目ID</th><th>标题</th><th>难度</th><th>创建时间</th></tr></thead><tbody>';
            latestProblems.forEach(problem => {
                html += `
                    <tr>
                        <td>${problem.id}</td>
                        <td><a href="/ojtest/problem/detail.html?id=${problem.id}" style="color: #3498db; text-decoration: none;">${problem.title}</a></td>
                        <td>${problem.difficulty}</td>
                        <td>${problem.createTime}</td>
                    </tr>
                `;
            });
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        // 页面加载时渲染最新题目
        window.addEventListener('load', renderLatestProblems);
    </script>
</body>
</html>
